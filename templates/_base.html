<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>{% block title %}VFXKart{% endblock %}</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GG6L4FMR08"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-GG6L4FMR08');
  </script>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/site.css') }}">

  <style>
    /* ---------- IRON-MAN HUD BACKGROUND ---------- */
    :root{
      --hud-bg: #020713;
      --hud-cyan: #22d3ee;
      --hud-blue: #1d4ed8;
      --hud-purple: #a855f7;
      --hud-grid: rgba(148,163,184,0.22);
    }

    *{box-sizing:border-box;}

    body{
      margin:0;
      font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif;
      color:#e5edff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      background:
        radial-gradient(circle at 0% 0%, rgba(56,189,248,0.28), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(168,85,247,0.25), transparent 60%),
        radial-gradient(circle at 50% 120%, rgba(15,23,42,0.95), #020617 80%);
      min-height:100vh;
      overflow-x:hidden;
    }

    .hud-bg,
    .hud-rings,
    .hud-scan {
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:-3;
    }

    .hud-bg{
      background-image:
        repeating-linear-gradient(90deg, rgba(148,163,184,0.12) 0 1px, transparent 1px 80px),
        repeating-linear-gradient(0deg, rgba(148,163,184,0.12) 0 1px, transparent 1px 80px);
      opacity:0.28;
    }

    .hud-rings::before,
    .hud-rings::after{
      content:"";
      position:absolute;
      border-radius:9999px;
      inset:18% 26%;
      border:1px solid rgba(56,189,248,0.35);
      box-shadow:
        0 0 30px rgba(56,189,248,0.35),
        0 0 80px rgba(129,140,248,0.22);
      mix-blend-mode:screen;
      animation:spin-slow 38s linear infinite;
    }
    .hud-rings::after{
      inset:24% 32%;
      border-color:rgba(129,140,248,0.55);
      animation-direction:reverse;
      animation-duration:54s;
    }

    @keyframes spin-slow{
      from{transform:rotate(0deg);}
      to{transform:rotate(360deg);}
    }

    .hud-scan{
      background-image:linear-gradient(
        to bottom,
        rgba(15,23,42,0) 0%,
        rgba(15,23,42,0.45) 48%,
        rgba(15,23,42,0.9) 52%,
        rgba(15,23,42,0) 100%
      );
      background-size:100% 220px;
      mix-blend-mode:soft-light;
      opacity:0.22;
      animation:scan-move 6.5s linear infinite;
    }
    @keyframes scan-move{
      from{background-position-y:0;}
      to{background-position-y:220px;}
    }

    header.nav{
      display:flex;
      align-items:center;
      gap:1.4rem;
      padding:18px 28px;
      position:sticky;
      top:0;
      z-index:20;
      background:linear-gradient(90deg,
        rgba(15,23,42,0.96),
        rgba(15,23,42,0.90),
        rgba(15,23,42,0.96)
      );
      backdrop-filter:blur(18px);
      border-bottom:1px solid rgba(148,163,184,0.35);
      box-shadow:0 18px 40px rgba(2,6,23,0.8);
    }

    .brand{
      text-decoration:none;
      color:#e5edff;
      font-weight:800;
      font-size:1.4rem;
      letter-spacing:0.08em;
      text-transform:uppercase;
    }

    .brand::before{
      content:"●";
      margin-right:8px;
      font-size:0.7rem;
      color:#22d3ee;
      text-shadow:0 0 8px rgba(34,211,238,0.9);
    }

    .main-nav{
      display:flex;
      gap:1rem;
      align-items:center;
    }

    .nav-link{
      position:relative;
      text-decoration:none;
      color:#a5b4fc;
      font-size:0.93rem;
      letter-spacing:0.02em;
    }

    .nav-link::after{
      content:"";
      position:absolute;
      left:0;
      bottom:-4px;
      height:2px;
      width:0;
      background:linear-gradient(90deg,#22d3ee,#a855f7);
      border-radius:999px;
      transition:width .2s ease-out;
      box-shadow:0 0 8px rgba(56,189,248,0.7);
    }

    .nav-link:hover{
      color:#e5edff;
    }
    .nav-link:hover::after{
      width:100%;
    }

    .nav-actions{
      margin-left:auto;
      display:flex;
      align-items:center;
      gap:0.75rem;
      font-size:0.9rem;
    }

    .nav-muted{
      color:#9ca3af;
    }

    .btn-ghost{
      border-radius:999px;
      padding:6px 12px;
      border:1px solid rgba(148,163,184,0.55);
      background:radial-gradient(circle at top, rgba(51,65,85,0.7), rgba(15,23,42,0.9));
      color:#e5edff;
      text-decoration:none;
    }
    .btn-ghost:hover{
      border-color:#e5edff;
    }

    .btn-cta{
      border-radius:999px;
      padding:7px 16px;
      border:none;
      text-decoration:none;
      font-weight:700;
      color:#020617;
      background:linear-gradient(120deg,#22d3ee,#38bdf8,#a855f7);
      box-shadow:
        0 0 12px rgba(56,189,248,0.7),
        0 0 32px rgba(88,28,135,0.7);
    }

    .cart-chip{
      border-radius:999px;
      padding:7px 14px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      text-decoration:none;
      color:#e5edff;
      border:1px solid rgba(148,163,184,0.6);
      background:radial-gradient(circle at top,rgba(15,23,42,0.9),rgba(2,6,23,0.95));
    }

    .cart-dot{
      width:20px;
      height:20px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:0.82rem;
      background:radial-gradient(circle,#22d3ee,#1d4ed8);
      box-shadow:0 0 10px rgba(56,189,248,0.9);
      color:#020617;
      font-weight:700;
    }

    main.container{
      width:min(1180px, 94%);
      margin:32px auto 40px auto;
      position:relative;
      z-index:1;
    }

    .flash-wrap{margin-bottom:1.1rem;display:flex;flex-direction:column;gap:0.6rem;}
    .flash{
      padding:10px 14px;
      border-radius:10px;
      font-size:0.9rem;
      border:1px solid rgba(148,163,184,0.4);
      background:radial-gradient(circle at top,rgba(15,23,42,0.9),rgba(2,6,23,0.95));
    }
    .flash.success{border-left:4px solid #22c55e;color:#bbf7d0;}
    .flash.error{border-left:4px solid #f97373;color:#fecaca;}

    footer.footer{
      width:min(1180px, 94%);
      margin:0 auto 24px auto;
      padding-top:16px;
      border-top:1px solid rgba(148,163,184,0.32);
      color:#9ca3af;
      font-size:0.86rem;
      display:flex;
      justify-content:space-between;
      gap:10px;
    }

    @media (max-width:820px){
      header.nav{
        flex-wrap:wrap;
        row-gap:10px;
      }
      .main-nav{
        order:3;
        width:100%;
        justify-content:flex-start;
        flex-wrap:wrap;
      }
      .nav-actions{
        order:2;
      }
    }

    @media (max-width:520px){
      header.nav{
        padding:12px 14px;
      }
      .main-nav{
        font-size:0.86rem;
      }
      .btn-cta{
        display:none;
      }
      footer.footer{
        flex-direction:column;
        text-align:center;
      }
    }
  </style>
</head>

<body>
  <div class="hud-bg"></div>
  <div class="hud-rings"></div>
  <div class="hud-scan"></div>

  <header class="nav">
    <a href="{{ url_for('index') }}" class="brand">VFXKart</a>

    <nav class="main-nav" aria-label="Primary">
      <a class="nav-link" href="{{ url_for('shop') }}">Shop</a>
      <a class="nav-link" href="{{ url_for('seller_root') }}">Sell</a>
      <a class="nav-link" href="#">How it Works</a>
    </nav>

    <div class="nav-actions">
      {% if current_user.is_authenticated %}
        <span class="nav-muted">Hi, {{ current_user.username }}</span>
        <a class="btn-ghost" href="{{ url_for('auth_logout') }}">Logout</a>
      {% else %}
        <a class="btn-ghost" href="{{ url_for('auth_login') }}">Log in</a>
        <a class="btn-cta" href="{{ url_for('auth_register') }}">Start Shopping</a>
      {% endif %}
      <a href="{{ url_for('cart_view') }}" class="cart-chip" aria-label="View cart">
        🛒
        <span class="cart-dot">{{ cart_count or 0 }}</span>
      </a>
    </div>
  </header>

  <main class="container">
    {% with msgs = get_flashed_messages(with_categories=true) %}
      {% if msgs %}
        <div class="flash-wrap">
          {% for cat, msg in msgs %}
            <div class="flash {{cat}}">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <footer class="footer">
    <span>© 2025 VFXKart</span>
    <span>HUD mode • Iron-Man style UI</span>
  </footer>

  <script src="{{ url_for('static', filename='js/site.js') }}"></script>
</body>
</html>
