{% extends "_base.html" %}
{% block title %}{{ product.title }} — VFXKart{% endblock %}
{% block content %}
<article class="product">
  <div class="gallery">
    {% if images %}
      <img class="hero" src="{{ images[0].full }}" alt="{{ product.title }}">
      <div class="thumbs">
        {% for im in images %}
          <img src="{{ im.thumb }}" data-full="{{ im.full }}" alt="thumb">
        {% endfor %}
      </div>
    {% else %}
      <div class="img ph big">No image</div>
    {% endif %}
  </div>
  <div class="meta">
    <h2>{{ product.title }}</h2>
    <div class="price big">{{ product.price or '—' }}</div>
    <div class="muted">Seller: {{ seller_name }}</div>
    <p>{{ product.description }}</p>
    <form method="post" action="{{ url_for('cart_add') }}">
      <input type="hidden" name="product_id" value="{{ product.id }}">
      <label>Qty <input type="number" name="qty" value="1" min="1"></label>
      <button class="btn">Add to cart</button>
    </form>
  </div>
</article>
<script>
document.querySelectorAll('.thumbs img').forEach(t=>{
  t.addEventListener('click',()=>{document.querySelector('.gallery .hero').src=t.dataset.full;})
})
</script>
{% endblock %}
